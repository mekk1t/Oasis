@using OasisWebApp.DTOs
@model FilmDto

@{
    ViewData["Title"] = "Info";
}
    <h2>@Model.Title</h2>
        <hr />
            <dl class="row">
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Description)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Description)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Director)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Director)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Genre)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Genre)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.ReleaseDate)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.ReleaseDate)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.RunningTime_Hours)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.RunningTime_Hours)
                </dd>
            </dl>
        <hr />

        <div>
            @if (@Model.Sessions.Count != 0)
            {
                <h5>Сеансы</h5>
                <hr />
                <table border="1">
                    <thead>
                        <tr>
                            @foreach (var Cinema in Model.Sessions.GroupBy(item => item.Cinema.Name))
                            {
                                var columns = Cinema.GroupBy(item => item.SessionDate).Count();
                                <th colspan="@columns">
                                    @Cinema.Key
                                </th>
                            }
                        </tr>
                        <tr>
                            @foreach (var Cinema in Model.Sessions.GroupBy(item => item.Cinema.Name))
                            {
                                foreach (var SessionDate in Cinema.GroupBy(item => item.SessionDate))
                                {
                                    <th>
                                        <a 
                                           asp-controller="Session"
                                           asp-action="Sessions" 
                                           asp-route-dateFilter="@SessionDate.Key.ToString()" 
                                           asp-route-cinemaFilter="@Cinema.Key" 
                                           asp-route-filmFilter="@Model.Title">
                                            @SessionDate.Key.ToString("dd MMMM")
                                        </a>
                                        
                                    </th>
                                }
                            }
                        </tr>
                    </thead>                    
                </table>
            }
            else
            {
                <p>Прокат закончен</p>
            }
        </div>
        <hr />
        <div>
            <a asp-controller="Film" asp-action="Films">Назад</a>
        </div>


